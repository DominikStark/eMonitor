window.WebSocket=window.WebSocket||window.MozWebSocket||false;if(!window.WebSocket){$("#ws").html("-");console.log("websockets not supportetd")}else{ws=new WebSocket("ws://"+location.host+"/ws");var reloadtimer=null;var connection_info="";$.ajax({type:"POST",url:"/data/frontpage?action=translatebaseinfo",success:function(a){connection_info=a.connection_info}});ws.onclose=function(){setTimeout(function(){$("#overlaycontent").html(connection_info);$(".overlay").show()},2000);if(!reloadtimer){reloadtimer=setInterval(tryReconnect,5000)}$("#ws").html('<i class="fa fa-unlink fa-lg"></i>')};ws.onmessage=function(a){var b=JSON.parse(a.data);console.log(b);alert(b)}}function tryReconnect(){$.get(window.location.href).done(function(){location.reload()}).fail(function(){console.log("reload failed")})}function closeOverlay(){$(".overlay").toggle();return false}function showMonitorDefinition(){$.ajax({type:"POST",url:"/data/monitors?action=monitoroverview",success:function(a){$("#overlaycontent").html(a);$(".overlay").show();$(".overlay").on("hide",function(){stopMonitorPing()});return false}});return false}function stopMonitorPing(){clearTimeout(nextrun)}$(".usermenu").hover(function(){$(this).find(".dropdown-menu").stop(true,true).delay(200).fadeIn(500)},function(){$(this).find(".dropdown-menu").stop(true,true).delay(200).fadeOut(500)});(function(a){a.each(["show","hide"],function(b,d){var c=a.fn[d];a.fn[d]=function(){this.trigger(d);return c.apply(this,arguments)}})})(jQuery);function showInfo(){$.ajax({type:"POST",url:"/data/frontpage?action=info",success:function(a){$("#overlaycontent").html(a);$(".overlay").toggle();return false}});return false}function showSystemInfo(){$.ajax({type:"POST",url:"/data/frontpage?action=systeminfo",success:function(a){$("#overlaycontent").html(a);$(".overlay").toggle();return false}});return false}function restartApp(){$.ajax({type:"POST",url:"/data/frontpage?action=restart",success:function(a){return false}});return false};